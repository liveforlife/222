(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c47954e"],{"25a3":function(t,e,i){},"3b7a":function(t,e,i){"use strict";var n=i("e566"),a=i.n(n);a.a},"4c45":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row-wrap",attrs:{id:"live-player"}},[i("div",{staticClass:"flex-1"}),t._v(" "),i("div",{attrs:{id:"main"}},[i("div",{attrs:{id:"player-box"}},[i("div",{attrs:{id:"player-head"}},[i("span",[i("span",{staticClass:"live-status"},[t._v(t._s(t.staStr))]),t._v("\n          :"+t._s(t.title)+"\n        ")]),t._v(" "),i("span",[i("count-down",{directives:[{name:"show",rawName:"v-show",value:t.showCountDown,expression:"showCountDown"}],attrs:{"start-time":t.startTime,"end-time":t.startTime,"day-txt":"天","hour-txt":"小时","minutes-txt":"分钟","seconds-txt":"秒"},on:{end_callback:t.countEnd}})],1)]),t._v(" "),i("div",{staticClass:"row-wrap",attrs:{id:"player-body"}},[t.loaded&&t.isLive?i("div",{staticClass:"ali-player flex-7"},[i("MxVueAliplayer",{attrs:{source:t.m3u8,cover:t.cover,width:"100%",height:"100%",language:"zh-cn","is-live":t.isLive,autoplay:"","control-bar-visibility":"hover","use-h5prism":"true","skin-layout":t.skinLayout}})],1):t._e(),t._v(" "),t.loaded&&0==t.isLive?i("div",{staticClass:"ali-player flex-7"},[i("MxVueAliplayer",{attrs:{source:t.m3u8,cover:t.cover,width:"100%",height:"100%",language:"zh-cn","is-live":t.isLive,"control-bar-visibility":"hover","use-h5prism":"true","skin-layout":t.skinLayout}})],1):t._e(),t._v(" "),i("div",{staticClass:"comment flex-2"},[i("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"聊天",name:"talk"}},[i("div",{staticClass:"tab-content",attrs:{id:"comment-box"}},t._l(t.comments,function(e){return i("p",{key:e.id},[t._v(t._s(e.user_name)+":"+t._s(e.content))])}),0)]),t._v(" "),i("el-tab-pane",{attrs:{label:"热力",name:"hot"}},[i("div",{staticClass:"tab-content"})]),t._v(" "),i("el-tab-pane",{attrs:{label:"提示",name:"tips"}},[i("div",{staticClass:"tab-content"})]),t._v(" "),i("el-tab-pane",{attrs:{label:"回看",name:"playback"}},[i("div",{staticClass:"tab-content"})])],1)],1)]),t._v(" "),i("div",{staticClass:"row-wrap",attrs:{id:"player-footer"}},[i("div",{staticClass:"flex-7"}),t._v(" "),i("div",{staticClass:"flex-2"},[i("p",{staticClass:"row-nowrap"},[i("span",[t._v("😊")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),i("span",[t._v(t._s(t.comment.length)+"/30")])]),t._v(" "),i("span",{staticClass:"row-nowrap",staticStyle:{"margin-left":"20px"}},[i("el-input",{staticStyle:{width:"68%"},attrs:{maxlength:"30"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),t._v(" "),i("el-button",{attrs:{type:"success"},on:{click:t.addComment}},[t._v("发送")])],1)])])]),t._v(" "),i("div",[i("live-group",{attrs:{title:"直播推荐",items:t.recommands}})],1)]),t._v(" "),i("div",{staticClass:"flex-1"})])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("a",{attrs:{href:""}},[t._v("分享")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("a",{attrs:{href:""}},[t._v("手机看")])])}],s=(i("386d"),i("8b12")),o=i.n(s),r=i("b775"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return void 0!=t.items[0]?i("div",{attrs:{id:"live-group"}},[i("div",[i("span",[i("strong",[i("a",[t._v(t._s(t.title)+"    ")])]),t._v(" "),t._l(t.subTitle,function(e,n){return i("a",{key:n,on:{click:function(i){return t.routeTo(e.id)}}},[t._v(t._s(e.title))])})],2)]),t._v(" "),i("div",{staticClass:"row-wrap"},t._l(t.items,function(e,n){return i("div",{key:n},[i("com-picbox",{staticClass:"pic-box",attrs:{id:e.id,img:e.img,title:e.title,"box-height":"160px","box-width":"260px"},on:{"box-click":t.playLive}})],1)}),0)]):t._e()},c=[],u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"com-picbox",on:{click:function(e){return e.preventDefault(),t.mouseClick(e)}}},[i("div",[i("img",{attrs:{src:t.imgUrl,alt:"wait",width:t.boxWidth,height:t.boxHeight}})]),t._v(" "),i("a",{staticClass:"single-line"},[t._v(t._s(t.title))])])},m=[],d=(i("c5f6"),i("83d6")),v={props:{id:{type:Number,default:NaN,require:!0},title:{type:String,default:null},img:{type:String,default:null},boxHeight:{type:String,default:"100%"},boxWidth:{type:String,default:"100%"}},computed:{imgUrl:function(){return d.web_base_url+this.img}},methods:{mouseClick:function(){this.$emit("box-click",this.id)}}},p=v,h=(i("3b7a"),i("2877")),f=Object(h["a"])(p,u,m,!1,null,null,null),b=f.exports,y={components:{ComPicbox:b},props:{items:{type:Array,default:function(){return[]}},hightLightFirst:{type:Boolean,default:!1},title:{type:String,default:""},subTitle:{type:Array,default:function(){return[]}}},methods:{playLive:function(t){this.$router.push({path:"/live/player",query:{id:t}})},routeTo:function(t){this.$router.push({path:"/live/details",query:{cate:t}})}}},_=y,g=(i("b85c"),Object(h["a"])(_,l,c,!1,null,"aef17100",null)),w=g.exports,x=i("5118"),C=i("0dec"),k=i.n(C),L=i("83d6"),S={components:{MxVueAliplayer:o.a,LiveGroup:w,CountDown:k.a},data:function(){return{id:null,recommands:[],activeName:"talk",title:"直播",token:" ",userName:"游客",worksid:null,comment:"",comments:[],cover:"",m3u8:"",autoplay:!0,isLive:!1,loaded:!1,timer:null,status:1,startTime:(new Date).getTime(),showCountDown:!0,skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"playButton",align:"tl",x:10,y:12},{name:"progress",align:"blabs",x:0,y:44},{name:"fullScreenButton",align:"tr",x:10,y:10},{name:"volume",align:"tr",x:5,y:10}]}]}},beforeRouteEnter:function(t,e,i){i(function(t){t.loaded=!1,t.isLive=!1;var e=t.$route.query.id;t.id=t.$route.query.id,void 0!==e&&(t.queryComments(e),t.queryLive(e))})},beforeRouteLeave:function(t,e,i){this.loaded=!1,this.isLive=!1,i()},computed:{staStr:function(){var t=["","正在直播","全程回顾"];return t[this.status]}},mounted:function(){var t=this;this.commentScrollToEnd(),this.listLives(1,1,6),this.timer?Object(x["clearInterval"])(this.timer):this.timer=Object(x["setInterval"])(function(){t.refreshComments()},5e3)},destroyed:function(){Object(x["clearInterval"])(this.timer)},methods:{refreshComments:function(){var t=this;Object(r["a"])({url:"/comment/findComment.htm",method:"get",params:{worksid:this.id,workstype:"1",index:0,size:1e5}}).then(function(e){t.comments=e.result.reverse(),t.commentScrollToEnd()})},queryComments:function(t){var e=this;Object(r["a"])({url:"/comment/findComment.htm",method:"get",params:{worksid:t,workstype:"1",index:0,size:100}}).then(function(t){e.comments=t.result.reverse()})},queryLive:function(t){var e=this;Object(r["a"])({url:"/live/selLiveById.htm",method:"get",params:{id:t}}).then(function(t){e.status=t.result.status,e.title=t.result.title,e.m3u8=t.result.m3u8,e.cover=L.web_base_url+t.result.img,e.m3u8.search(/\.mp4$/i)>0?e.isLive=!1:e.isLive=!0,e.startTime=new Date(t.result.CountDown).getTime(),e.loaded=!0})},addComment:function(t){var e=this;Object(r["a"])({url:"/comment/addComment.htm",method:"get",params:{content:this.comment,token:this.token,worksid:this.id,workstype:"1"}}).then(function(t){console.log(JSON.stringify(t)),e.comments.push({id:Math.random(),user_name:e.userName,content:e.comment}),e.comment="",e.commentScrollToEnd()})},commentScrollToEnd:function(){var t=document.getElementById("comment-box");t.scrollTop=t.scrollHeight},listLives:function(t,e,i){var n=this;Object(r["a"])({url:"/home-page/lives",method:"get",params:{category:t,offset:e,size:i}}).then(function(t){return n.recommands=t.data})},countEnd:function(){this.showCountDown=!1}}},T=S,E=(i("684c"),Object(h["a"])(T,n,a,!1,null,null,null));e["default"]=E.exports},"684c":function(t,e,i){"use strict";var n=i("25a3"),a=i.n(n);a.a},b85c:function(t,e,i){"use strict";var n=i("f925"),a=i.n(n);a.a},e566:function(t,e,i){},f925:function(t,e,i){}}]);