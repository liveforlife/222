<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
			let offLightState = function(light){
				this.light = light;
			}
			offLightState.prototype.buttonPress = function(){
				console.log('弱光');
				this.light.setState(this.light.weakLightState);
			}
			
			let weakLightState = function(light){
				this.light = light;
			}
			weakLightState.prototype.buttonPress = function(){
				console.log('中光');
				this.light.setState(this.light.strongLIghtState);
			}
			
			let strongLIghtState = function(light){
				this.light = light;
			}
			strongLIghtState.prototype.buttonPress = function(){
				console.log('强光');
				this.light.setState(this.light.offLightState);
			}
			
			let Light = function(){
				this.strongLIghtState = new strongLIghtState(this);
				this.weakLightState = new weakLightState(this);
				this.offLightState = new offLightState(this);
				this.button=null;
			}
			Light.prototype.init=function(){
				let button =document.createElement('butt');
				let self = this;
				button.innerHTML = '开关1';
				this.button = document.body.appendChild(button);
				this.currState = this.offLightState;
				this.button.onclick = function(){
					self.currState.buttonPress();
				}
			}
			Light.prototype.setState=function(state){
				this.currState = state ;
			}
		let light = new Light();
		light.init();
		</script>
	</body>
</html>
